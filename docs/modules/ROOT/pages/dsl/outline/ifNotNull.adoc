:docinfo: shared
:source-highlighter: highlight.js
:toc:

= ifNotNull

`ifNotNull` viser innhold kun dersom en nullable verdi finnes.

== Syntaks

[source,kotlin]
----
ifNotNull(nullableVerdi) { verdi ->
    // verdi er garantert ikke null her
}
----

== Varianter

=== Enkel ifNotNull

[source,kotlin]
----
ifNotNull(avtaleland) { land ->
    paragraph {
        text(
            bokmal {
                +"Vedtaket er gjort etter trygdeavtalen med "
                +land
                +"."
            }
        )
    }
}
----

=== Flere nullable verdier

[source,kotlin]
----
ifNotNull(fom, tom) { fomDato, tomDato ->
    paragraph {
        text(
            bokmal {
                +"Perioden er fra "
                +fomDato.format()
                +" til "
                +tomDato.format()
                +"."
            }
        )
    }
}
----

=== Med fallback (orIfNotNull / orShow)

[source,kotlin]
----
ifNotNull(primaerVerdi) { verdi ->
    text(bokmal { +"Primær: " + verdi })
}.orIfNotNull(sekundaerVerdi) { verdi ->
    text(bokmal { +"Sekundær: " + verdi })
}.orShow {
    text(bokmal { +"Ingen verdi funnet" })
}
----

== Eksempler

=== Nullable liste

[source,kotlin]
----
ifNotNull(barnetilleggBarn) { barn ->
    paragraph {
        text(bokmal { +"Barnetillegget gjelder:" })

        list {
            forEach(barn) { enkeltBarn ->
                item {
                    text(bokmal { +enkeltBarn.navn })
                }
            }
        }
    }
}
----

=== Nøstet datastruktur

[source,kotlin]
----
ifNotNull(barnetillegg) { bt ->
    title2 {
        text(bokmal { +"Barnetillegg" })
    }

    paragraph {
        text(
            bokmal {
                +"Du får "
                +bt.beloep.format()
                +" kroner i barnetillegg."
            }
        )
    }
}
----

== Hvorfor ifNotNull?

`ifNotNull` er tryggere enn manuell null-sjekk:

[source,kotlin]
----
// ❌ Dårlig - må fortsatt håndtere nullable verdi
showIf(verdi.notNull()) {
    text(bokmal { +"Verdi: " + verdi.ifNull("".expr()) })
}

// ✅ Bra - gir tilgang til utpakket verdi
ifNotNull(verdi) { v ->
    text(bokmal { +"Verdi: " + v })
}
----

== Scope

`ifNotNull` kan brukes i:

* `outline` - Hovedinnhold
* `paragraph` - Avsnitt
* `list` - Lister
* `table` - Tabeller

== Beste praksis

* Grupper relaterte nullable felter i nøstede data-klasser
* Bruk multi-parameter `ifNotNull` for relaterte verdier
* Unngå dyp nøsting - vurder å redesigne datamodellen

== Relaterte elementer

* xref:dsl/outline/showIf.adoc[showIf] - Betinget visning
* xref:dsl/outline/forEach.adoc[forEach] - Iterasjon

