name: "Build and publish new LaTeX image"
on:
  workflow_dispatch:
  pull_request:

jobs:
  "build-container":
    name: "build latest texlive/XeTeX version from ctan"
    runs-on: "ubuntu-latest"
    steps:
      - uses: "actions/checkout@v2"
      - name: Build and publish Docker image
        run: "docker build --pull --tag latex-$(date +'%Y-%m-%d-%H:%M') -f pdf-bygger/latex.Dockerfile pdf-bygger && echo $GITHUB_TOKEN | docker login\
        \ --username $GITHUB_REPOSITORY --password-stdin https://ghcr.io\
        \ && docker push latex-$(date +'%Y-%m-%d-%H:%M')"
        env:
          "GITHUB_TOKEN": "${{ secrets.GITHUB_TOKEN }}"